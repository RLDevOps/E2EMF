<!DOCTYPE html>
<html lang="en"><head>
    <meta charset="utf-8">
    <title>BtB | Search</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Bootstrap core CSS -->
    <link href="css/bootstrap.css" rel="stylesheet">	
	<link href="css/font-awesome.min.css" rel="stylesheet">	
	<link href="css/custom.css" rel="stylesheet">
    <link href="css/custom.min.css" rel="stylesheet">
    <script src="js/latestjquery.js"></script>
    <script src="js/spin.js"></script>
    <script src="js/my.js"></script>
<script>       
   // window.onload = checkAuthentication;
</script> 
<style>
#results li{
list-style: none;
margin-bottom: 10px;                       
}    
    
#title{
font-size: 14px;
margin-right: 5px;            
    }    
#searchkey{
font-size: 18px;
font-weight: bold;            
    }   
.entities li{
list-style: none;
margin: 5px;   
background: #f6f4f4;
padding: 5px;
cursor: pointer; 
font-size: 15px; 
color: #000!important;                             
    }
    .entities li:hover {
 color: #0094ff;       
    } 
li .active{
color: #0094ff;  
background: #eee!important;          
    }         
</style>      	
</head>

  <body>
	<!-- Overlay Div -->
	<div id="overlay" style="display: none;">
		<div class="overlay-inner">
			<div id="followingBallsG">
				<div id="followingBallsG_1" class="followingBallsG">
				</div>
				<div id="followingBallsG_2" class="followingBallsG">
				</div>
				<div id="followingBallsG_3" class="followingBallsG">
				</div>
				<div id="followingBallsG_4" class="followingBallsG">
				</div>
			</div>
		</div>
	</div>


	<div id="wrapper">
		<div id="top-nav" class="fixed skin-1">
			<button type="button" class="navbar-toggle pull-left" id="sidebarToggle">
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
			</button>
			<ul class="nav-notification clearfix">
				<li class="profile dropdown">
					<a class="dropdown-toggle" data-toggle="dropdown" href="#">
						<strong>Vishal Prasad</strong>
						<span><i class="fa fa-chevron-down"></i></span>
					</a>
					<ul class="dropdown-menu">
						
						<li><a tabindex="-1" href="profile.html" class="main-link"><i class="fa fa-edit fa-lg"></i> Edit profile</a></li>
						
						<li><a tabindex="-1" href="#" class="theme-setting"><i class="fa fa-cog fa-lg"></i> Setting</a></li>
						<li class="divider"></li>
						<li><a tabindex="-1" href="login.html" class="main-link"><i class="fa fa-lock fa-lg"></i> Log out</a></li>
					</ul>
				</li>
			</ul>
            <span class="heading">End To End Material Flow</span>
		</div><!-- /top-nav-->
		
		<aside class="fixed skin-1">
			<div class="brand">
				<span>BtB</span>
				<span class="text-toggle"></span>
			</div><!-- /brand -->					
			<div class="sidebar-inner">
				<div class="size-toggle">
					<a class="btn btn-sm" id="sizeToggle">
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
					</a>
					
				</div><!-- /size-toggle -->	
				<!-- /user-block -->
				
				<div class="main-menu">
					<ul>
                        <li class="">
							<a href="home.html">
								<span class="menu-icon">
									<i class="fa fa-home fa-lg"></i> 
								</span>
								<span class="text">
									Home
								</span>
							</a>
							
						</li>

                        <li class="">
							<a href="search.html">
								<span class="menu-icon">
									<i class="fa fa-search fa-lg"></i> 
								</span>
								<span class="text">
								  Search Content
								</span>
								<span class="menu-hover"></span>
							</a>
							
						</li>

                        <li class="active">
							<a href="search2.html">
								<span class="menu-icon">
									<i class="fa fa-search fa-lg"></i> 
								</span>
								<span class="text">
								  Facets Search
								</span>
								<span class="menu-hover"></span>
							</a>
							
						</li>

						<li >
							<a href="po-profyling.html">
								<span class="menu-icon">
									<i class="fa fa-desktop fa-lg"></i> 
								</span>
								<span class="text">
									PO-Profiling
								</span>
								<span class="menu-hover"></span>
							</a>
						</li>
						
						
						
						

					</ul>
					
					
				</div><!-- /main-menu -->
			</div><!-- /sidebar-inner -->
		</aside>

		<div id="main-container">
			<div id="breadcrumb">
				<ul class="breadcrumb">
					  <li><i class="fa fa-home"></i><a href="home.html"> Home</a></li>
					 <li class="active">Search Content</li>	 
				</ul>
			</div><!-- /breadcrumb-->
			
			<!-- /grey-container -->
			
			<div class="padding-md" style="padding-top: 10px!important;">
<div class="row">
                <div class="col-md-8">
               <div class="input-group m-bottom-md">
				<input type="search" autocomplete="on" placeholder="Search here..." class="form-control" id="searchterm">
							<span class="input-group-btn">
								<button type="button" class="btn btn-danger" id="search">Search</button>
							</span>
						</div>
                </div>
</div>
<div class="row" id="facets-tabs" style="display: none">
<div class="col-md-9">
            <!-- Nav tabs category -->
            
    
            <!-- Tab panes -->
            <div class="tab-content faq-cat-content">
                <div class="tab-pane active in fade" id="faq-cat-1">
                    <div class="panel-group" id="accordion-cat-1">
                        <div class="panel panel-default panel-faq">
                         <div class="panel-body" id="sumarry">
                         <span id="title">Search Results For</span><span id="searchkey"></span><span id="loading"></span>
                         <hr>
                         <ul class="facets">  
                         <li>Purchase Orders (<span class="pocount"></span>)<span ></span></li> 
                         <li>Sales Orders (<span class="socount"></span>)</li></ul>
  </div>
                            
                        </div>
                        
                    </div>
                </div>
                <div class="tab-pane fade" id="faq-cat-2">
                    <div class="panel-group" id="accordion-cat-2">
                        <div class="panel panel-default panel-faq">
                            
                           
                                <div class="panel-body" id="po">                               
                <table id="potable" class="display  table table-hover table-striped">
                <thead>
                        <tr>
                            <th>PurchDoc.#</th>
                            <th> Item# </th>
                            <th>Material</th>
                            <th>Material # </th>
                            <th>Qty</th>
                            <th>Net Price</th>
                        </tr>
                </thead>
                <tbody>
                </tbody> 
                </table>           </div>
</div>
</div>
</div>

                <div class="tab-pane fade" id="faq-cat-3">
                    <div class="panel-group" id="accordion-cat-2">
                        <div class="panel panel-default panel-faq">
                            
                           
                                <div class="panel-body" id="so">
                           <table id="sotable" class="display  table table-hover table-striped">
                <thead>
                        <tr>
                          <th>Sales Doc #</th>
                            <th> Item #</th>
                            <th>Material # </th>
                            <th>Material</th>
                            <th>Net Value</th>
                            <th>Order Qty</th>
                        </tr>
                </thead>
                <tbody>
                </tbody> 
                </table>
                                </div>
                            
                        </div>
                        
                    </div>
                </div>
            </div>
          </div>     
<div class="col-md-3 panel panel-default">
<h4>Facets</h4>
<hr>
<ul class=" faq-cat-tabs entities">
                <li class="active"><a href="#faq-cat-1" data-toggle="tab">Summary</a></li>
                <li id="podetails"><a href="#faq-cat-2" data-toggle="tab">Purchase Orders(<span class="pocount"></span>)<span ></span></a></li>
                <li><a href="#faq-cat-3" data-toggle="tab">Sales Orders (<span class="socount"></span>)<span ></span></a></li>
            </ul>
</div>              
</div>
			<!-- /.padding-md -->
		</div><!-- /main-container -->
</div>
		<!-- Footer
		================================================== -->
		<footer>
			<div class="row">
				<div class="col-sm-6">
					<span class="footer-brand">
						<strong class="text-danger">Back To Basics</strong>
					</span>
					<p class="no-margin">
						Â© 2013 <strong>johnson & johnson</strong>. ALL Rights Reserved. 
					</p>
				</div><!-- /.col -->
			</div><!-- /.row-->
		</footer>

	</div><!-- /wrapper -->

	<a href="" id="scroll-to-top" class="hidden-print"><i class="fa fa-chevron-up"></i></a>
	
    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->	
	<!-- Jquery -->
	<!-- Bootstrap -->

 <script src="js/bootstrap.min.js"></script>
 <script src="js/pagination.js"></script>	
	<!-- Cookie -->
<script src="js/jquery.dataTables.min.js"></script>	
	<script src="js/jquery.cookie.js"></script>
	<script src="js/endless.js"></script>
    <script src="js/spin.js"></script>
<script>
    $(document).ready(function () {
        $("ul.pagination1").quickPagination({ pageSize: "10" });
    });

    $("#search").click(function (e) {     
        var key = $("#searchterm").val();
        $("#facets-tabs").show();
        $("#searchkey").empty();
        $("#searchkey").append(key);
        $.ajax({
            type: "GET",
          //  url: "rest/search/searchservice/" +"key:"+ key+","+"facet:POH",
            url: "http://jjsandbox.relevancelab.com:8080/E2EMF/rest/search/searchservice/" + "key:" + key + "," + "facet:POH",
            dataType: "xml",
            beforeSend: function () {
                  $('#loading').show();
              },
              complete: function () {
                  $('#loading').hide();
              },
            success: function (podata) {
                addToPoTable(podata);

            }
        });
        $.ajax({
            type: "GET",
        //   url: "rest/search/searchservice/" +"key:"+ key+","+"facet:SDID",
            url: "http://jjsandbox.relevancelab.com:8080/E2EMF/rest/search/searchservice/" + "key:" + key + "," + "facet:SDID",
            dataType: "xml",
            beforeSend: function () {
                  $('#loading').show();
              },
              complete: function () {
                  $('#loading').hide();
              },
            success: function (sodata) {
                addToSoTable(sodata);
            }
        });
        return false;

        function addToPoTable(podata) {
          var Potable;
          Potable = $("#potable").dataTable(
           {
               "sPaginationType": "full_numbers",
               "bJQueryUI": true,
               "bFilter": false,
               "bInfo": false,
               "bLengthChange": false
           });
            Potable.fnClearTable();
            var pocount = $(podata).find("count");
            $(".pocount").empty();
            $(".pocount").append(pocount);
            var facet = $(podata).find("facet");
            var $results = $(podata).find("SearchResult");
            $results.each(function (index, event) {

                var $event = $(event),
                   addData = [];
                addData.push($event.children("field1").text());
                addData.push($event.children("field2").text());
                addData.push($event.children("field6").text());
                addData.push($event.children("field7").text());
                addData.push($event.children("field17").text());
                addData.push($event.children("field24").text());
                Potable.fnAddData(addData);
            });
        }
        function addToSoTable(sodata) {
           var Sotable;
           Sotable = $("#sotable").dataTable(
           {
               "sPaginationType": "full_numbers",
               "bJQueryUI": true,
               "bFilter": false,
               "bInfo": false,
               "bLengthChange": false
           });
           Sotable.fnClearTable();

            var socount = $(sodata).find("count");
            if (socount == null) {
                socount = "No search results found"
            } else {
                $(".socount").empty();
                $(".socount").append(socount);
            }
            var $events = $(sodata).find("SearchResult");

            $events.each(function (index, event) {
                var $event = $(event),
                   addData = [];

                addData.push($event.children("field2").text());
                addData.push($event.children("field3").text());
                addData.push($event.children("field4").text());
                addData.push($event.children("field9").text());
                addData.push($event.children("field44").text());
                addData.push($event.children("field49").text());

                Sotable.fnAddData(addData);
            });
        }
    });

    var opts = {
        lines: 12, // The number of lines to draw
        length: 5, // The length of each line
        width: 2, // The line thickness
        radius: 5, // The radius of the inner circle
        corners: 0.7, // Corner roundness (0..1)
        rotate: 0, // The rotation offset
        direction: 1, // 1: clockwise, -1: counterclockwise
        color: '#000', // #rgb or #rrggbb or array of colors
        speed: 1, // Rounds per second
        trail: 60, // Afterglow percentage
        shadow: false, // Whether to render a shadow
        hwaccel: false, // Whether to use hardware acceleration
        className: 'spinner', // The CSS class to assign to the spinner
        zIndex: 2e9, // The z-index (defaults to 2000000000)
        top: '-26', // Top position relative to parent in px
        left: '240' // Left position relative to parent in px
    };
     var target = document.getElementById('loading');
    var spinner = new Spinner(opts).spin(target);

</script>  
<div id="cboxOverlay" style="display: none;"></div>
  </body></html>
